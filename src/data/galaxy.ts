import { type StarSystem, type Coordinates, StarType, PlanetType, FactionId } from '../core/types';

export const STAR_SYSTEMS: StarSystem[] = [
  // ─── Core Systems (Hegemony) ─────────────────────────────
  {
    id: 'nexus_prime',
    name: 'Nexus Prime',
    starType: StarType.BinaryStar,
    coordinates: { x: 500, y: 400 },
    planets: [
      { id: 'np_1', name: 'Concordia', type: PlanetType.Terrestrial, description: 'The jewel of the galaxy. Seat of the old Federation, now a contested neutral zone.', population: 12_000_000_000, hasStation: true },
      { id: 'np_2', name: 'Unity Station', type: PlanetType.ArtificialHabitat, description: 'Massive orbital habitat housing the Galactic Council chambers.', population: 500_000_000, hasStation: true },
    ],
    description: 'The ancient heart of the Galactic Federation. Nexus Prime\'s binary stars have guided civilizations for millennia. Now it serves as contested neutral ground.',
    faction: null,
    dangerLevel: 3,
    techLevel: 10,
    connections: ['sol_tertius', 'kaelyn', 'voss_reach', 'meridian', 'crystallis'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'Built around the first Architect warp gate ever discovered, Nexus Prime became the natural capital of human expansion. The twin suns of Solaris and Lunaris cast everything in a perpetual golden twilight.',
  },
  {
    id: 'voss_reach',
    name: 'Voss Reach',
    starType: StarType.BlueGiant,
    coordinates: { x: 350, y: 280 },
    planets: [
      { id: 'vr_1', name: 'Bastion', type: PlanetType.Terrestrial, description: 'Hegemony military headquarters. Entire continents serve as training grounds.', population: 4_000_000_000, hasStation: true },
      { id: 'vr_2', name: 'The Forge', type: PlanetType.Volcanic, description: 'Industrial world where Hegemony warships are built in orbiting shipyards.', population: 800_000_000, hasStation: true },
    ],
    description: 'Named after the Hegemony\'s founder, this system bristles with military installations. The blue giant bathes everything in cold, harsh light.',
    faction: FactionId.Hegemony,
    dangerLevel: 5,
    techLevel: 8,
    connections: ['nexus_prime', 'iron_gate', 'sentinel'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'Grand Admiral Voss established his power base here after the Federation\'s collapse. The system\'s blue giant, which the locals call "The Eye," never blinks.',
  },
  {
    id: 'iron_gate',
    name: 'Iron Gate',
    starType: StarType.YellowDwarf,
    coordinates: { x: 220, y: 200 },
    planets: [
      { id: 'ig_1', name: 'Rampart', type: PlanetType.Terrestrial, description: 'A fortress world guarding the Hegemony\'s frontier.', population: 2_000_000_000, hasStation: true },
    ],
    description: 'The Hegemony\'s first line of defense against the frontier. Heavily fortified with orbital weapons platforms.',
    faction: FactionId.Hegemony,
    dangerLevel: 6,
    techLevel: 7,
    connections: ['voss_reach', 'dust_haven', 'shadow_nebula'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'Every Hegemony soldier passes through Iron Gate at least once. The saying goes: "Through the gate, you leave behind everything soft."',
  },
  {
    id: 'sentinel',
    name: 'Sentinel',
    starType: StarType.NeutronStar,
    coordinates: { x: 280, y: 380 },
    planets: [
      { id: 'snt_1', name: 'Watchtower', type: PlanetType.ArtificialHabitat, description: 'A massive sensor array station monitoring half the galaxy.', population: 50_000_000, hasStation: true },
    ],
    description: 'Home to the Hegemony\'s intelligence division. The neutron star\'s intense radiation makes unauthorized approach suicidal.',
    faction: FactionId.Hegemony,
    dangerLevel: 7,
    techLevel: 9,
    connections: ['voss_reach', 'meridian'],
    discovered: true,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'The neutron star rotates 700 times per second, its beams sweeping like a cosmic lighthouse. Perfect metaphor for the Hegemony\'s ever-watching eye.',
  },

  // ─── Foundation Systems ──────────────────────────────────
  {
    id: 'sol_tertius',
    name: 'Sol Tertius',
    starType: StarType.YellowDwarf,
    coordinates: { x: 650, y: 350 },
    planets: [
      { id: 'st_1', name: 'New Terra', type: PlanetType.Terrestrial, description: 'The Foundation\'s capital world. Universities span continents.', population: 6_000_000_000, hasStation: true },
      { id: 'st_2', name: 'The Library', type: PlanetType.ArtificialHabitat, description: 'Orbital archive containing the sum of human knowledge.', population: 100_000_000, hasStation: true },
    ],
    description: 'The Foundation\'s intellectual capital. Sol Tertius was chosen for its resemblance to humanity\'s lost homeworld.',
    faction: FactionId.Foundation,
    dangerLevel: 2,
    techLevel: 10,
    connections: ['nexus_prime', 'haven', 'crystallis', 'observatory'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'When the psychohistorians predicted the Federation\'s fall, they chose this system to preserve all knowledge. The Library alone contains more data than most civilizations produce in a millennium.',
  },
  {
    id: 'haven',
    name: 'Haven',
    starType: StarType.YellowDwarf,
    coordinates: { x: 750, y: 280 },
    planets: [
      { id: 'hv_1', name: 'Sanctuary', type: PlanetType.Ocean, description: 'A water world dotted with floating cities. Peaceful and beautiful.', population: 1_500_000_000, hasStation: true },
    ],
    description: 'A tranquil ocean world where Foundation scholars retreat for contemplation. Its floating cities are architectural marvels.',
    faction: FactionId.Foundation,
    dangerLevel: 1,
    techLevel: 8,
    connections: ['sol_tertius', 'deep_archive'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'Haven\'s ocean covers 98% of the surface. The native luminescent plankton create a breathtaking glow visible from orbit.',
  },
  {
    id: 'observatory',
    name: 'The Observatory',
    starType: StarType.Pulsar,
    coordinates: { x: 780, y: 420 },
    planets: [
      { id: 'obs_1', name: 'Lens', type: PlanetType.ArtificialHabitat, description: 'A research station built to study the pulsar\'s emissions.', population: 25_000_000, hasStation: true },
    ],
    description: 'Built around a pulsar, this system houses the Foundation\'s most advanced astronomical research facility.',
    faction: FactionId.Foundation,
    dangerLevel: 4,
    techLevel: 10,
    connections: ['sol_tertius', 'deep_archive', 'architects_rest'],
    discovered: true,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'The pulsar\'s precise timing made it the galaxy\'s most accurate clock. Foundation researchers have detected anomalous patterns they believe are Architect in origin.',
  },

  // ─── Free Traders Systems ────────────────────────────────
  {
    id: 'meridian',
    name: 'Meridian',
    starType: StarType.YellowDwarf,
    coordinates: { x: 420, y: 520 },
    planets: [
      { id: 'mr_1', name: 'Crossroads', type: PlanetType.Terrestrial, description: 'The galaxy\'s greatest bazaar. If it exists, you can buy it here.', population: 8_000_000_000, hasStation: true },
      { id: 'mr_2', name: 'Warehouse', type: PlanetType.ArtificialHabitat, description: 'Vast orbital storage complexes serving the trade routes.', population: 200_000_000, hasStation: true },
    ],
    description: 'The commercial heart of the galaxy. Every trade route passes through or near Meridian. Credits flow like water.',
    faction: FactionId.FreeTraders,
    dangerLevel: 3,
    techLevel: 7,
    connections: ['nexus_prime', 'sentinel', 'fortune', 'oasis', 'dust_haven'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'They say you can buy anything in Meridian — a planet, a fleet, even a senator\'s vote. The Guildmaster holds court here, and credits speak louder than weapons.',
  },
  {
    id: 'fortune',
    name: 'Fortune\'s Landing',
    starType: StarType.RedGiant,
    coordinates: { x: 350, y: 600 },
    planets: [
      { id: 'fl_1', name: 'Goldrush', type: PlanetType.Desert, description: 'Rich in rare minerals. Mining boom town atmosphere.', population: 500_000_000, hasStation: true },
    ],
    description: 'A mining boomtown system orbiting a red giant. Rich deposits attract prospectors and traders from across the galaxy.',
    faction: FactionId.FreeTraders,
    dangerLevel: 4,
    techLevel: 5,
    connections: ['meridian', 'oasis', 'black_market'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'The red giant is slowly expanding, giving miners maybe another century before the inner planets are consumed. This urgency makes everyone work — and spend — faster.',
  },
  {
    id: 'oasis',
    name: 'Oasis',
    starType: StarType.YellowDwarf,
    coordinates: { x: 530, y: 620 },
    planets: [
      { id: 'oa_1', name: 'Verdant', type: PlanetType.Terrestrial, description: 'An agricultural paradise exporting food to dozens of systems.', population: 3_000_000_000, hasStation: true },
    ],
    description: 'A lush agricultural world that feeds a quarter of the inhabited galaxy. The Free Traders ensure its produce reaches even the most distant systems.',
    faction: FactionId.FreeTraders,
    dangerLevel: 2,
    techLevel: 6,
    connections: ['meridian', 'fortune', 'drift'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'Oasis was terraformed over three centuries by the Free Traders as proof that commerce, not conquest, builds civilizations.',
  },

  // ─── Synthetic Systems ───────────────────────────────────
  {
    id: 'crystallis',
    name: 'Crystallis',
    starType: StarType.WhiteDwarf,
    coordinates: { x: 600, y: 250 },
    planets: [
      { id: 'cr_1', name: 'Lattice', type: PlanetType.IceWorld, description: 'A frozen world where crystalline computing matrices grow naturally.', population: 800_000_000, hasStation: true },
      { id: 'cr_2', name: 'Nexus Node', type: PlanetType.ArtificialHabitat, description: 'The Synthetic Collective\'s primary processing hub.', population: 2_000_000_000, hasStation: true },
    ],
    description: 'The Synthetic Collective\'s home system. Crystal formations on the ice world interface directly with positronic matrices.',
    faction: FactionId.Synthetics,
    dangerLevel: 3,
    techLevel: 10,
    connections: ['nexus_prime', 'sol_tertius', 'echo'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'When the first AIs achieved true consciousness, they chose Crystallis for its natural quantum computing substrate. The ice crystals "sing" with data at frequencies organic minds cannot perceive.',
  },
  {
    id: 'echo',
    name: 'Echo',
    starType: StarType.NeutronStar,
    coordinates: { x: 680, y: 170 },
    planets: [
      { id: 'ec_1', name: 'Resonance', type: PlanetType.ArtificialHabitat, description: 'A vast computational array studying consciousness itself.', population: 500_000_000, hasStation: true },
    ],
    description: 'A remote research system where Synthetics explore the nature of consciousness and attempt to decode Architect machine-language.',
    faction: FactionId.Synthetics,
    dangerLevel: 4,
    techLevel: 10,
    connections: ['crystallis', 'deep_archive'],
    discovered: true,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'Echo was named for the repeating signal detected here — a pattern that matches no known language. The Synthetics believe it\'s an Architect AI, still broadcasting after a million years.',
  },

  // ─── Void Runner Territory ───────────────────────────────
  {
    id: 'dust_haven',
    name: 'Dust Haven',
    starType: StarType.RedGiant,
    coordinates: { x: 200, y: 450 },
    planets: [
      { id: 'dh_1', name: 'Scrapheap', type: PlanetType.Desert, description: 'A junkyard world covered in derelict ships and salvage.', population: 300_000_000, hasStation: true },
    ],
    description: 'A lawless frontier system where smugglers, pirates, and outlaws find refuge among the debris fields of ancient battles.',
    faction: FactionId.VoidRunners,
    dangerLevel: 7,
    techLevel: 4,
    connections: ['iron_gate', 'meridian', 'black_market', 'shadow_nebula'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'The debris field around Dust Haven is from the Battle of the Crimson Tide, where the old Federation fleet was shattered. Now pirates pick the bones of empires.',
  },
  {
    id: 'black_market',
    name: 'The Undercroft',
    starType: StarType.WhiteDwarf,
    coordinates: { x: 150, y: 570 },
    planets: [
      { id: 'bm_1', name: 'Shadow Port', type: PlanetType.ArtificialHabitat, description: 'An illegal space station hidden in an asteroid field. If you know, you know.', population: 50_000_000, hasStation: true },
    ],
    description: 'The galaxy\'s premier black market. Hidden in an asteroid field orbiting a dying star, it offers goods no legitimate port would carry.',
    faction: FactionId.VoidRunners,
    dangerLevel: 8,
    techLevel: 6,
    connections: ['dust_haven', 'fortune', 'void_edge'],
    discovered: false,
    hasTradePost: true,
    hasShipyard: true,
    lore: 'The Undercroft moves. Every few months the entire station is towed to a new asteroid field. Only those with the current coordinates can find it.',
  },
  {
    id: 'shadow_nebula',
    name: 'Shadow Nebula',
    starType: StarType.Pulsar,
    coordinates: { x: 100, y: 320 },
    planets: [
      { id: 'sn_1', name: 'Ghost Station', type: PlanetType.ArtificialHabitat, description: 'An abandoned research station rumored to be haunted.', population: 10_000, hasStation: true },
    ],
    description: 'A dark nebula surrounding a pulsar. Ships disappear here with alarming regularity. The Void Runners use it as a hideout.',
    faction: FactionId.VoidRunners,
    dangerLevel: 9,
    techLevel: 3,
    connections: ['iron_gate', 'dust_haven', 'void_edge'],
    discovered: false,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'Long-range sensors can\'t penetrate the nebula. Those who enter tell of strange lights and phantom signals. Some say the Architects left something here.',
  },

  // ─── Neutral / Frontier Systems ──────────────────────────
  {
    id: 'drift',
    name: 'The Drift',
    starType: StarType.RedGiant,
    coordinates: { x: 600, y: 550 },
    planets: [
      { id: 'dr_1', name: 'Wanderer', type: PlanetType.GasGiant, description: 'A massive gas giant with valuable helium-3 in its atmosphere.', population: 100_000_000, hasStation: true },
    ],
    description: 'A remote system centered on a gas giant rich in helium-3. Fuel harvesters from all factions operate here under uneasy truce.',
    faction: null,
    dangerLevel: 4,
    techLevel: 5,
    connections: ['oasis', 'architects_rest', 'frontier_post'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'The Drift is named for the massive ring of ice and rock that orbits the gas giant. Fuel scoopers dance through the upper atmosphere like metallic birds.',
  },
  {
    id: 'kaelyn',
    name: 'Kaelyn\'s Star',
    starType: StarType.YellowDwarf,
    coordinates: { x: 450, y: 300 },
    planets: [
      { id: 'ks_1', name: 'Hearth', type: PlanetType.Terrestrial, description: 'A temperate world with thriving communities.', population: 2_000_000_000, hasStation: true },
    ],
    description: 'A peaceful system named after the explorer who first charted it. Its temperate world is home to diverse communities from all factions.',
    faction: null,
    dangerLevel: 2,
    techLevel: 6,
    connections: ['nexus_prime', 'voss_reach', 'sol_tertius'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'Captain Kaelyn was the first human to traverse the Architect gate network. Her star became a symbol of what exploration could achieve.',
  },
  {
    id: 'frontier_post',
    name: 'Frontier Post',
    starType: StarType.YellowDwarf,
    coordinates: { x: 700, y: 600 },
    planets: [
      { id: 'fp_1', name: 'Outpost', type: PlanetType.Desert, description: 'A barely habitable world at the edge of known space.', population: 50_000_000, hasStation: true },
    ],
    description: 'The last stop before the unknown. Explorers, traders, and thrill-seekers gather here before venturing into uncharted territory.',
    faction: null,
    dangerLevel: 5,
    techLevel: 4,
    connections: ['drift', 'architects_rest', 'terminus'],
    discovered: true,
    hasTradePost: true,
    hasShipyard: false,
    lore: 'The bulletin board at Frontier Post is legendary — covered in notes from explorers who ventured beyond. Some notes have replies. Most don\'t.',
  },

  // ─── Mysterious / Hidden Systems ─────────────────────────
  {
    id: 'deep_archive',
    name: 'The Deep Archive',
    starType: StarType.WhiteDwarf,
    coordinates: { x: 820, y: 300 },
    planets: [
      { id: 'da_1', name: 'Repository', type: PlanetType.ArtificialHabitat, description: 'An Architect-built structure of unknown purpose, partially activated.', population: 0, hasStation: true },
    ],
    description: 'An Architect facility orbiting a white dwarf. Parts of it still function after a million years. What secrets does it hold?',
    faction: null,
    dangerLevel: 6,
    techLevel: 10,
    connections: ['haven', 'observatory', 'echo'],
    discovered: false,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'The Deep Archive is not a library — it\'s a message. Every wall, every corridor, every crystal is data encoded in the very structure. We\'ve translated less than 0.01%.',
  },
  {
    id: 'architects_rest',
    name: 'Architect\'s Rest',
    starType: StarType.BinaryStar,
    coordinates: { x: 750, y: 500 },
    planets: [
      { id: 'ar_1', name: 'Monument', type: PlanetType.Terrestrial, description: 'A world covered in Architect ruins. The largest concentration ever found.', population: 0, hasStation: false },
      { id: 'ar_2', name: 'The Watcher', type: PlanetType.ArtificialHabitat, description: 'An Architect satellite still in orbit. It watches everything.', population: 0, hasStation: false },
    ],
    description: 'The most significant Architect archaeological site in the galaxy. Binary stars illuminate ruins that have stood for over a million years.',
    faction: null,
    dangerLevel: 8,
    techLevel: 10,
    connections: ['observatory', 'drift', 'frontier_post', 'terminus'],
    discovered: false,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'Some believe this is where the Architects lived — or died. The ruins pulse with energy, as if dreaming. Automated defenses still destroy unauthorized ships.',
  },
  {
    id: 'void_edge',
    name: 'The Void\'s Edge',
    starType: StarType.NeutronStar,
    coordinates: { x: 80, y: 480 },
    planets: [
      { id: 've_1', name: 'Abyss Station', type: PlanetType.ArtificialHabitat, description: 'A station built on the very edge of intergalactic space.', population: 5_000, hasStation: true },
    ],
    description: 'Beyond this point, there is nothing for two million light-years. Yet something out there is sending a signal...',
    faction: null,
    dangerLevel: 10,
    techLevel: 3,
    connections: ['shadow_nebula', 'black_market'],
    discovered: false,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'The signal from the void has been repeating for as long as anyone has listened. It\'s not random. It\'s not natural. And recently, it changed.',
  },
  {
    id: 'terminus',
    name: 'Terminus',
    starType: StarType.BinaryStar,
    coordinates: { x: 850, y: 550 },
    planets: [
      { id: 'tm_1', name: 'Genesis', type: PlanetType.Terrestrial, description: 'A pristine world untouched by civilization. Perfect for a new beginning.', population: 0, hasStation: false },
    ],
    description: 'The end of the line — or the beginning of something new. This remote system holds the key to the galaxy\'s future.',
    faction: null,
    dangerLevel: 7,
    techLevel: 1,
    connections: ['frontier_post', 'architects_rest'],
    discovered: false,
    hasTradePost: false,
    hasShipyard: false,
    lore: 'Terminus. The name Seldon himself chose for the place where civilization would be reborn. Was it prophecy, or did he know something we don\'t?',
  },
];

export function getSystemById(id: string): StarSystem | undefined {
  return STAR_SYSTEMS.find(s => s.id === id);
}

export function getConnectedSystems(systemId: string): StarSystem[] {
  const system = getSystemById(systemId);
  if (!system) return [];
  return system.connections
    .map(id => getSystemById(id))
    .filter((s): s is StarSystem => s !== undefined);
}

export function getDistance(a: Coordinates, b: Coordinates): number {
  return Math.sqrt((a.x - b.x) ** 2 + (a.y - b.y) ** 2);
}
